#! /usr/bin/make -f

.PHONY: binary build clean

install:
	@set -e;\
		GRADLE_USER_HOME=gradletmp ./gradle-2.1/bin/gradle -PscalaVersion=2.10.4 releaseTarGz;\
		tar xvf ./core/build/distributions/kafka_2.10-0.8.2-beta.tgz;\
	dh_install --list-missing 
	dh_installinit -A --no-start --name=statbox-kafka -r -u defaults
	dh_installdeb
	dh_makeshlibs -pstatbox-kafka
	dh_shlibdeps 
	dh_gencontrol
	dh_md5sums
	dh_builddeb

binary: install

build: clean
	dh_testdir

clean:
	dh_clean
	rm -rf __build
